!function(){"use strict";window.AccessibilityNavigation=class{constructor(t){if(this.options=this._merge({selector:".navigation-main",toggle:".nav-burger",minWidth:1024,classes:{submenuButton:"btn-toggle-submenu",expand:"nav-expanded",active:"is-active",bodyOpen:"navigation-open",boundsRight:"bounds-right",boundsLeft:"bounds-left"},ariaLabels:{expand:"Expand menu: ",collapse:"Collapse menu: "}},t||{}),this.navigation=document.querySelector(this.options.selector),this.toggle=document.querySelector(this.options.toggle),this.navigation){this.state=!1,this.dropdowns=[],this.active=[],this.listeners=new WeakMap,this._init();for(const t of this.dropdowns)this._addSubMenuButton(t);new ResizeObserver(()=>{for(const t of this.dropdowns)this._isDesktop()?this._registerDropdownEvents(t):this._unregisterDropdownEvents(t)}).observe(document.body)}}_merge(t,e){return[...new Set([...Object.keys(t),...Object.keys(e)])].reduce((s,i)=>({...s,[i]:"object"==typeof t[i]?Object.assign({},t[i],e[i]):e[i]?e[i]:t[i]}),{})}_createSubMenuButton(){this.btn=document.createElement("button"),this.btn.classList.add(this.options.classes.submenuButton),this.btn.ariaHasPopup="true",this.btn.ariaExpanded="false"}_initFocusTrapTargets(){const t=[this.navigation.closest("#header")?.querySelector("a[href].logo"),...this.navigation.querySelectorAll("a[href]:not([disabled]), button:not([disabled])")];this.firstFocus=t[0]??this.toggle,this.lastFocus=t[t.length-1]??[]}_focusTrapEvent(t){"Tab"!==t.key&&9!==t.keyCode||(document.activeElement!==this.lastFocus||t.shiftKey||(t.preventDefault(),this.firstFocus?.focus()),document.activeElement===this.firstFocus&&t.shiftKey&&(t.preventDefault(),this.lastFocus?.focus()))}_toggleMenuState(){this.toggle.ariaExpanded=this.state?"false":"true",this.toggle.classList.toggle(this.options.classes.active,!this.state),this.navigation.classList.toggle(this.options.classes.active,!this.state),document.body.classList.toggle(this.options.classes.bodyOpen,!this.state),this.state=!this.state}_focusMenu(){this.state?document.addEventListener("keydown",this._focusTrapEvent,!1):document.removeEventListener("keydown",this._focusTrapEvent,!1)}_init(){this._createSubMenuButton(),this._initMobileToggleEvents(),this.navigation.querySelectorAll("li").forEach(t=>{t.classList.contains("submenu")&&this.dropdowns.push(t);const e=t.firstElementChild;e.classList.contains("active")&&(e.ariaCurrent="page"),!e.ariaLabel&&e.title&&(e.ariaLabel=e.title,e.removeAttribute("title"))}),document.addEventListener("keyup",t=>{"Escape"===t.key&&this._hideDropdown()})}_updateAriaState(t,e){t.btn.ariaLabel=(e?this.options.ariaLabels.collapse:this.options.ariaLabels.expand)+t.btn.dataset.label,t.btn.ariaExpanded=e?"true":"false"}_collapseSubmenu(t){t.classList.remove(this.options.classes.expand),t.querySelector(":scope > ul")?.classList.remove(this.options.classes.boundsLeft,this.options.classes.boundsRight),this._updateAriaState(t,!1)}_hideDropdown(t=null){0!==this.active.length&&(this.active.includes(t)?(this._collapseSubmenu(t),this.active=this.active.filter(e=>e!==t)):null===t||this.active[0]!==t&&!this.active[0].contains(t)?(this.active.forEach(t=>this._collapseSubmenu(t)),this.active=[]):this.active.filter(e=>!!e.contains(t)||(this._collapseSubmenu(e),!1)))}_setDropdownPosition(t){const e=t.querySelector(":scope > ul");null!==e&&(e.getBoundingClientRect().right>=window.innerWidth?e.classList.add(this.options.classes.boundsRight):e.getBoundingClientRect().left<0&&e.classList.add(this.options.classes.boundsLeft))}_showDropdown(t){this._hideDropdown(t),t.classList.add(this.options.classes.expand),this._isDesktop()&&this._setDropdownPosition(t),this._updateAriaState(t,!0),this.active.includes(t)||this.active.push(t)}_toggleDropdownState(t,e){e?this._showDropdown(t):this._hideDropdown(t)}_addSubMenuButton(t){const e=t.firstElementChild,s=this.btn.cloneNode();t.btn=s,s.dataset.label=e.textContent,s.ariaLabel=this.options.ariaLabels.expand+e.textContent,s.addEventListener("click",()=>{const e="false"===s.ariaExpanded??!0;this._toggleDropdownState(t,e)}),e.after(s)}_mouseEnter(t,e){this._toggleDropdownState(e,!0)}_mouseLeave(t,e){this._hideDropdown(e)}_focusOut(t,e){t.relatedTarget&&this.active.length>0&&!e.contains(t.relatedTarget)&&this._hideDropdown(e)}_isDesktop(){return window.innerWidth>=this.options.minWidth}_initMobileToggleEvents(){this._initFocusTrapTargets(),this._focusTrapEvent=this._focusTrapEvent.bind(this),this.toggle?.addEventListener("click",()=>{this._isDesktop()||(this._toggleMenuState(),this._focusMenu())})}_registerDropdownEvents(t){if(this.listeners.has(t))return;const e={mouseenter:e=>this._mouseEnter(e,t),mouseleave:e=>this._mouseLeave(e,t),focusout:e=>this._focusOut(e,t)};for(const[s,i]of Object.entries(e))t.addEventListener(s,i);this.listeners.set(t,e)}_unregisterDropdownEvents(t){const e=this.listeners.get(t);if(e){for(const[s,i]of Object.entries(e))t.removeEventListener(s,i);this.listeners.delete(t)}}}}();